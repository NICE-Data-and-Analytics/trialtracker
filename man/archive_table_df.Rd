% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/dashboard_helpers.R
\name{archive_table_df}
\alias{archive_table_df}
\title{Read and prepare an archive table for display}
\usage{
archive_table_df(
  con,
  table,
  rename_map,
  drop_cols = character(),
  log_fun = NULL
)
}
\arguments{
\item{con}{A DBI connection (or pool object usable by DBI).}

\item{table}{Archive table name (e.g. "NCT_rxv").}

\item{rename_map}{Named character vector: \code{c("New Name" = "old_name")}.}

\item{drop_cols}{Character vector of columns to drop if present.}

\item{log_fun}{Optional logging function, called with messages on failures.}
}
\value{
A data.frame. On failure, returns a one-column data.frame with
\code{Message} or \code{Error}.
}
\description{
Reads an archived registry table (e.g. "NCT_rxv") and applies the standard
dashboard transformations:
\itemize{
\item validates DB connection and table existence
\item drops unwanted columns
\item coerces character columns to UTF-8
\item converts \code{Query_Date} (days since 1970-01-01) to \code{Archive Date}
\item renames columns to user-facing labels
\item returns a data.frame suitable for DT rendering
}
}
\details{
This helper does not create DT widgets; UI rendering is handled by the Rmd/server.
}
\keyword{internal}
